## 概要

- 目的：ユーザーが指定した条件（キーワード/ジャンル/エリア）で飲食店一覧や地図を閲覧できるようにする。 この画面で再検索も可能（TOPのSearchFormをそのまま配置）。
- 表示方式：初期表示はSSR（条件と初回結果）。追加取得はCSR。
- パス：/shops/

---

## レイアウト

```
┌────────────────────────────────────────────┐
│ [Header] ロゴ                                         │
├────────────────────────────────────────────┤
│ [SearchForm] キーワード | ジャンル（複数） | エリア（複数） | [検索] │
│ [Tabs] 一覧 | 地図                                          │
├────────────────────────────────────────────┤
│ [ResultList] 一覧（カード×N）  ┐  [ResultMap] 地図（ピン表示） │
│ [Pagination]        ┘                          │
├────────────────────────────────────────────┤
│ [Footer] クレジット一文                                      │
└────────────────────────────────────────────┘
```

---

## 画面要素

| 区分   | 要素ID                 | 名称           | 種別             | 説明                                          |
| ------ | ---------------------- | -------------- | ---------------- | --------------------------------------------- |
| Header | `hd-logo`              | ロゴ           | 画像／リンク     | クリックで TOP（`/`）へ                       |
| Form   | `srch-form`            | SearchForm     | フォーム         | TOPと同等の検索フォーム（本画面で再検索可能） |
| Tabs   | `tab-list` / `tab-map` | 一覧／地図タブ | タブ             | 表示切替（既定：一覧）                        |
| Result | `rs-list`              | 結果リスト     | コンテナ         | 店舗カード群（`rs-card-*`）                   |
| Result | `rs-map`               | 結果マップ     | 地図             | 検索結果のピン表示                            |
| Result | `rs-pagination`        | ページ制御     | ボタン群／リンク | ページネーション                              |
| Footer | `ft-credit`            | クレジット     | テキスト         | クレジット一文のみ表示                        |

---

## 各要素の仕様

### Header

- **`hd-logo`**：`<a href="/">`としてTOP遷移。

### SearchForm

- TOPページのSearchFormセクション仕様を参照。

### ResultList

取得した検索結果を、カードで繰り返し表示する。カードには以下の情報を含める。

| UI項目         | 表示内容                                 | 内部API（HP-01）フィールド |
| -------------- | ---------------------------------------- | -------------------------- |
| サムネイル画像 | 中サイズ画像（固定／フォールバックなし） | `shops[].photo.m`          |
| 店名           | 太字・1行省略                            | `shops[].name`             |
| ジャンル       | サブテキスト（タグ風でも可）             | `shops[].genre.name`       |
| キャッチ       | 説明テキスト（任意／2行省略）            | `shops[].catch`            |

#### 挙動・導線

- **カード全体がリンク**：`/shops/{id}` に内部遷移（`shops[].id` を利用）。
- 画像 `alt`：`"{shops[].name} の写真"`。
- 省略ルール：店名1行、キャッチ2行のマルチライン省略。

### ResultMap

#### 概要

- 検索結果を地図上にピンで表示するセクション。
- 内部API（HP-01）から取得した店舗データの `lat`, `lng` を利用してピンを配置。
- ピンをクリックすると、店舗概要を示すポップアップカード が表示される。
- ポップアップ内の「詳細を見る」ボタンから、店舗詳細ページ（`/shops/{id}`）へ遷移する。

#### ポップアップカード表示項目

| UI項目       | 表示内容                           | 内部API（HP-01）             |
| ------------ | ---------------------------------- | ---------------------------- |
| 店名         | 太字・1行省略                      | `shops[].name`               |
| ジャンル     | サブテキスト（任意）               | `shops[].genre.name`         |
| 住所（短縮） | 市区町村レベルまで短縮表示         | `shops[].address`            |
| 詳細ボタン   | 「詳細を見る」ボタン（内部リンク） | `shops[].id` → `/shops/{id}` |

#### 挙動

- ピンをクリック → 対応する店舗のポップアップを表示。
- 他のピンをクリック → 前のポップアップを閉じて新しいものを開く。
- 地図外クリックまたはESCキー → ポップアップを閉じる。
- 「詳細を見る」クリック → `/shops/{id}` に内部遷移。

#### 表示ルール

- 1件のみ表示。位置はピンの直上。
- カード全体は非リンク（クリックしても遷移しない）。
- テキスト省略：店名は1行、住所は末尾省略。
- 背景は白、軽いシャドウと角丸を付与、矢印付きポップアップスタイル。

### Pagination

#### 概要

- ResultListの下部に表示（ResultList表示時のみ）。
- 内部API（HP-01）から受け取るページ情報で「前へ/次へ」とページ番号を制御。
- 0件、または1ページしかない場合は非表示。

#### 表示ルール

- 非表示条件：`total === 0` または `pageCount <= 1`
- 要素：
  - 「前へ」ボタン（`page > 1` のときのみ活性）
  - ページ番号（現在は `aria-current="page"`、押下不可）
  - 「次へ」ボタン（`page < pageCount` のときのみ活性）
- 数字の表示数は**コンパクト**（例：最大5つのウィンドウ表示：`[1] … 4 5 6 … 20`）  
   ※ 省略記号（…）は押下不可

### Footer

- **`ft-credit`**：クレジット一文のみ（内部リンクなし）。
