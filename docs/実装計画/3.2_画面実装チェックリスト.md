# 3.2 画面実装チェックリスト

WBS「3.実装 > 3.2モック開発（見た目）」の実装タスク一覧（推奨実装順）

**重要**: このフェーズでは静的な画面実装（モック）を行い、API結合は3.3フェーズで実施します。

**テスト方針**: 各コンポーネント・ページ実装後に、プロジェクトのテスト戦略（`docs/設計/テスト戦略設計.md`）に沿ってテストを作成します。

---

## 1. スタイリング基盤セットアップ

### 1.1 Tailwind CSS 導入

- [x] `@nuxtjs/tailwindcss` インストール
  - [x] `yarn add -D @nuxtjs/tailwindcss`
  - [x] `nuxt.config.ts` の `modules` に `@nuxtjs/tailwindcss` 追加
- [x] `tailwind.config.ts` 作成
  - [x] カラーパレット定義（プライマリ/セカンダリ/エラー/成功/警告）
  - [x] カスタムブレークポイント設定（デスクトップ優先）
  - [x] フォント設定
- [x] `app/assets/css/main.css` 作成（グローバルスタイル）
  - [x] Tailwind ディレクティブ（`@tailwind base/components/utilities`）
  - [x] カスタムCSS変数定義（必要に応じて）
  - [x] リセットCSS・ベーススタイル
- [x] `nuxt.config.ts` に `css` 配列追加（`~/assets/css/main.css` を指定）

### 1.2 グローバルスタイル設定

- [x] フォント読み込み設定（Google Fonts等、必要に応じて）
- [x] `app.vue` でグローバルスタイルの適用確認

---

## 2. レイアウト実装

### 2.1 ルートレイアウト

- [ ] `app/app.vue` 更新
  - [ ] `<NuxtLayout>` と `<NuxtPage />` でページをレンダリング
  - [ ] グローバルなメタタグ設定（`useHead` で初期設定）

### 2.2 デフォルトレイアウト

- [ ] `app/layouts/default.vue` 実装
  - [ ] Header, Footer, メインコンテンツの配置
  - [ ] `<slot />` でページコンテンツを挿入
- [ ] **テスト作成**: レイアウトが正しく表示されることを確認

---

## 3. 共通コンポーネント実装

### 3.1 Header コンポーネント

- [ ] `app/components/Header.vue` 実装
  - [ ] ロゴ表示（画像またはテキスト）
  - [ ] ロゴをクリックでTOP（`/`）へ遷移（`NuxtLink` 使用）
  - [ ] レスポンシブ対応
- [ ] **テスト作成**: ロゴ表示、遷移リンクの確認

### 3.2 Footer コンポーネント

- [ ] `app/components/Footer.vue` 実装
  - [ ] クレジット一文表示
  - [ ] HotPepper API 利用規約リンク（必要に応じて）
  - [ ] レスポンシブ対応
- [ ] **テスト作成**: クレジット文言の表示確認

### 3.3 ShopCard コンポーネント

- [ ] `app/components/ShopCard.vue` 実装
  - [ ] Props定義（`shop: ShopSummary` 型）
  - [ ] サムネイル画像表示（`photo.m` または `photo.s`）
  - [ ] 店名（太字・1行省略、CSS: `truncate`）
  - [ ] ジャンル（サブテキスト）
  - [ ] キャッチコピー（2行省略、CSS: `line-clamp-2`、任意）
  - [ ] カード全体をリンク化（`NuxtLink` で `/shops/{id}` へ）
  - [ ] ホバーエフェクト
  - [ ] 画像 `alt` 属性設定（`"{店名} の写真"`）
  - [ ] レスポンシブ対応
- [ ] **テスト作成**: Props表示、リンクURL、画像alt属性の確認

---

## 4. SearchForm コンポーネント実装

### 4.1 基本構造

- [ ] `app/components/SearchForm.vue` 実装
  - [ ] Props定義
    - `genres: Genre[]` (ジャンルマスタ)
    - `largeAreas: LargeArea[]` (大エリアマスタ)
    - `middleAreas: MiddleArea[]` (中エリアマスタ)
    - `smallAreas: SmallArea[]` (小エリアマスタ)
  - [ ] Reactive state 定義
    - `keyword: string`
    - `selectedGenres: string[]`
    - `selectedLargeAreas: string[]`
    - `selectedMiddleAreas: string[]`
    - `selectedSmallAreas: string[]`

### 4.2 フォームフィールド実装

- [ ] キーワード入力フィールド
  - [ ] `<input type="text" v-model="keyword">`
  - [ ] ラベル・プレースホルダー設定
- [ ] ジャンル選択UI
  - [ ] ドロップダウンまたはタグ形式（複数選択可）
  - [ ] 選択済みジャンルをバッジ表示
  - [ ] 削除ボタン実装（バッジクリックで削除）
  - [ ] 選択上限チェック（最大2件）
- [ ] エリア選択UI（3階層: 大/中/小）
  - [ ] 大エリア選択ドロップダウン
  - [ ] 中エリア選択ドロップダウン（大エリア選択時のみ活性）
  - [ ] 小エリア選択ドロップダウン（中エリア選択時のみ活性）
  - [ ] 親子関係の自動補完ロジック
    - [ ] 小エリア選択時、親の中・大エリアを自動選択
    - [ ] 親エリア削除時、配下の中・小エリアを自動削除
  - [ ] 選択上限チェック（大3件/中5件/小5件）
  - [ ] 選択済みエリアをバッジ表示

### 4.3 検索実行処理

- [ ] 検索ボタン実装
  - [ ] クリック時に入力値を正規化（空値除外、トリム）
  - [ ] URLクエリを構築
    - `q`: キーワード
    - `genres`: ジャンルコード（カンマ区切り）
    - `area_l`: 大エリアコード（カンマ区切り）
    - `area_m`: 中エリアコード（カンマ区切り）
    - `area_s`: 小エリアコード（カンマ区切り）
  - [ ] `navigateTo('/shops?...')` で検索結果ページへ遷移
- [ ] バリデーション（クライアントサイド）
  - [ ] 空値チェック（全フィールドが空の場合は検索不可）
  - [ ] 文字数制限（キーワード最大100文字等）

### 4.4 テスト作成

- [ ] **テスト作成**:
  - 入力・選択操作の動作確認
  - エリア階層関係の自動補完動作
  - 検索ボタンクリック時の遷移URL確認
  - バリデーションエラー表示

---

## 5. TOPページ実装

### 5.1 Hero コンポーネント

- [ ] `app/components/Hero.vue` 実装
  - [ ] キャッチコピー（H1タグ）
  - [ ] 説明文（サブテキスト）
  - [ ] 背景画像またはグラデーション（任意）
  - [ ] レスポンシブ対応
- [ ] **テスト作成**: キャッチコピー、説明文の表示確認

### 5.2 NearbyHotCarousel コンポーネント

- [ ] `app/components/NearbyHotCarousel.vue` 実装
  - [ ] セクションタイトル（「周辺のホットな飲食店」）
  - [ ] 横スクロールカルーセル実装
    - [ ] 前へ/次へボタン
    - [ ] CSS Grid または Flexbox で横スクロール
    - [ ] タッチスワイプ対応（オプション）
  - [ ] ShopCard を使って店舗表示（最大10件）
  - [ ] 状態表示
    - [ ] 位置情報未許可/失敗: セクション非表示
    - [ ] 取得中: スケルトンカード表示（`v-if="isLoading"`）
    - [ ] 空結果: `周辺で該当店舗が見つかりませんでした`
    - [ ] エラー時: `周辺情報の取得に失敗しました`
  - [ ] 位置情報取得ロジック（モック実装）
    - [ ] `navigator.geolocation.getCurrentPosition` 使用
    - [ ] 許可/拒否のハンドリング
    - [ ] モックデータで店舗10件を表示
- [ ] **テスト作成**: カルーセル表示、状態遷移の確認

### 5.3 TOPページ統合

- [ ] `app/pages/index.vue` 実装
  - [ ] Hero コンポーネント表示
  - [ ] SearchForm コンポーネント表示（モックマスタデータを渡す）
  - [ ] NearbyHotCarousel コンポーネント表示
  - [ ] SEO設定（`useHead` で title, description, OGP）
  - [ ] モックデータ準備
    - [ ] `tests/fixtures/masters.ts` からジャンル・エリアマスタ取得
    - [ ] `tests/fixtures/shops.ts` から周辺店舗データ取得
- [ ] **テスト作成**: ページ全体の表示、SEO設定の確認

---

## 6. 検索結果ページ実装

### 6.1 ResultList コンポーネント

- [ ] `app/components/ResultList.vue` 実装
  - [ ] Props定義（`shops: ShopSummary[]`）
  - [ ] ShopCard を使って店舗リスト表示
  - [ ] 0件時の表示（`検索条件に一致する店舗が見つかりませんでした`）
  - [ ] グリッドレイアウト（2〜3カラム、レスポンシブ）
  - [ ] ローディング状態表示（スケルトンカード、`v-if="isLoading"`）
- [ ] **テスト作成**: 店舗リスト表示、0件表示の確認

### 6.2 ResultMap コンポーネント

- [ ] `app/components/ResultMap.vue` 実装
  - [ ] Props定義（`shops: ShopSummary[]`）
  - [ ] Google Maps JavaScript API 統合
    - [ ] `useScriptGoogleMaps` または `useHead` で手動スクリプトロード
    - [ ] APIキー設定（`runtimeConfig.public.googleMapsApiKey`）
    - [ ] マップ初期化処理
  - [ ] 店舗位置にピン（Marker）表示
  - [ ] ピンクリックでポップアップ（InfoWindow）表示
    - [ ] 店名（太字・1行省略）
    - [ ] ジャンル（サブテキスト）
    - [ ] 住所（短縮表示）
    - [ ] 「詳細を見る」ボタン（`NuxtLink` で `/shops/{id}` へ）
  - [ ] ポップアップの開閉制御
    - [ ] 他のピンクリック時に前のポップアップを閉じる
    - [ ] 地図外クリックで閉じる
  - [ ] 地図の初期位置・ズーム設定（全ピンが収まるように調整）
  - [ ] スクロール操作制御（地図フォーカス時のみ有効、`gestureHandling: 'cooperative'`）
- [ ] **テスト作成**: 地図表示、ピン表示、ポップアップ動作の確認

### 6.3 Pagination コンポーネント

- [ ] `app/components/Pagination.vue` 実装
  - [ ] Props定義
    - `currentPage: number`
    - `pageCount: number`
    - `total: number`
  - [ ] 「前へ」ボタン（`page > 1` のときのみ活性）
  - [ ] ページ番号表示
    - [ ] 現在ページは `aria-current="page"`、押下不可
    - [ ] コンパクト表示（最大5つのウィンドウ: `[1] … 4 5 6 … 20`）
    - [ ] 省略記号（…）は押下不可
  - [ ] 「次へ」ボタン（`page < pageCount` のときのみ活性）
  - [ ] 非表示条件（`total === 0` または `pageCount <= 1`）
  - [ ] クリック時にEmit（`@update:page`）またはURLクエリ更新
- [ ] **テスト作成**: ページ番号表示、ボタン活性/非活性、非表示条件の確認

### 6.4 検索結果ページ統合

- [ ] `app/pages/shops/index.vue` 実装
  - [ ] SearchForm コンポーネント表示（TOPと同じ）
  - [ ] タブ切替UI（一覧/地図）
    - [ ] タブボタン実装（`ref` で `activeTab` 管理）
    - [ ] 既定値: 一覧タブ
  - [ ] ResultList / ResultMap の表示切替（`v-if="activeTab === 'list'"` / `v-else-if="activeTab === 'map'"`）
  - [ ] Pagination 表示（一覧タブ時のみ、`v-if="activeTab === 'list'"`）
  - [ ] SEO設定（`useHead` で title, description, OGP）
  - [ ] URLクエリからパラメータ取得（`useRoute().query`）
  - [ ] モックデータ準備
    - [ ] `tests/fixtures/shops.ts` から検索結果20件取得
    - [ ] ページネーション情報設定（`page: 1, pageCount: 5, total: 100`）
- [ ] **テスト作成**: タブ切替、URLクエリ解析、SEO設定の確認

---

## 7. 詳細ページ実装

### 7.1 ShopHeader コンポーネント

- [ ] `app/components/ShopHeader.vue` 実装
  - [ ] Props定義（`shop: ShopDetail`）
  - [ ] サムネイル画像（`photo.l`）
  - [ ] 店名（太字・大きめ・1行省略）
  - [ ] ジャンル（サブテキスト）
  - [ ] キャッチコピー（2行省略、任意）
  - [ ] 画像 `alt` 属性設定（`"{店名} の写真"`）
  - [ ] レスポンシブ対応
- [ ] **テスト作成**: 店舗情報表示、画像alt属性の確認

### 7.2 ShopInfoGrid コンポーネント

- [ ] `app/components/ShopInfoGrid.vue` 実装
  - [ ] Props定義（`shop: ShopDetail`）
  - [ ] 基本情報の表示（グリッドレイアウト）
    - [ ] 住所（`shop.address`）
    - [ ] 最寄り駅（`shop.stationName`、任意）
    - [ ] アクセス（`shop.access`、任意）
    - [ ] 営業時間（`shop.open`）
    - [ ] 定休日（`shop.close`）
    - [ ] 予算（`shop.budget.name` / `shop.budget.average`）
    - [ ] 禁煙・喫煙（`shop.nonSmoking`、任意）
    - [ ] 駐車場（`shop.parking`、任意）
    - [ ] カード（`shop.card`、任意）
    - [ ] 貸切（`shop.charter`、任意）
    - [ ] 個室（`shop.privateRoom`、任意）
  - [ ] 空値は項目ごと非表示（`v-if`）
  - [ ] ラベルとデータのペア表示（例: `住所: 東京都...`）
  - [ ] レスポンシブ対応（1カラム → 2カラム）
- [ ] **テスト作成**: 基本情報表示、空値項目の非表示確認

### 7.3 ShopMap コンポーネント

- [ ] `app/components/ShopMap.vue` 実装
  - [ ] Props定義（`lat: number, lng: number, shopName: string`）
  - [ ] Google Maps JavaScript API 統合
  - [ ] 店舗位置にピン（Marker）表示
  - [ ] マーカーにラベル表示（店名、InfoWindow）
  - [ ] 中程度のズーム設定（`zoom: 15`）
  - [ ] スクロール操作制御（地図フォーカス時のみ有効）
  - [ ] レスポンシブ対応
- [ ] **テスト作成**: 地図表示、ピン位置の確認

### 7.4 詳細ページ統合

- [ ] `app/pages/shops/[id].vue` 実装
  - [ ] ShopHeader コンポーネント表示
  - [ ] アクションボタン表示
    - [ ] 「公式詳細ページ」ボタン（`<a>` タグ、`target="_blank"`, `rel="noopener"`）
    - [ ] `shop.urlPc` へのリンク
  - [ ] ShopInfoGrid コンポーネント表示
  - [ ] ShopMap コンポーネント表示
  - [ ] SEO設定（`useHead` で title, description, OGP、店舗名を含む）
  - [ ] URLパラメータから店舗ID取得（`useRoute().params.id`）
  - [ ] モックデータ準備
    - [ ] `tests/fixtures/shops.ts` から店舗詳細1件取得
  - [ ] 404エラーハンドリング
    - [ ] 存在しない店舗IDの場合、`throw createError({ statusCode: 404 })`
- [ ] **テスト作成**: 店舗詳細表示、公式リンク、SEO設定、404エラーの確認

---

## 8. ドキュメント・設定

- [ ] `docs/実装計画/3.2_画面実装チェックリスト.md`: このファイル
- [ ] `README.md` 更新（画面実装の概要、コンポーネント一覧）
- [ ] Tailwind 設定のドキュメント化（`tailwind.config.js` にコメント追加）

---

## 完了条件

- [ ] すべてのチェック項目が完了
- [ ] コンポーネント・ページテストがパス（`yarn test`）
- [ ] 型チェックがパス（`yarn type-check`）
- [ ] Lintエラーなし（`yarn lint`）
- [ ] Stylelintエラーなし（`yarn lint:css`）
- [ ] ローカル環境で全画面が正しく表示されることを目視確認
- [ ] モックデータで画面遷移が正しく動作することを確認

**注**: API結合は「3.3 API結合」フェーズで実施
